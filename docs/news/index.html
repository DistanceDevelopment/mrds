<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • mrds</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><script type="text/javascript">(function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)}; t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i; y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);})(window, document, "clarity", "script", "m9r3j2v7dj");</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mrds</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Function reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/mrds-golftees.html">Point and full independence</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/distancesamp" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/DistanceDevelopment/mrds/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/DistanceDevelopment/mrds/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3.0.0" id="mrds-300">mrds 3.0.0<a class="anchor" aria-label="anchor" href="#mrds-300"></a></h2><p class="text-muted">CRAN release: 2024-10-23</p>
<p>New features</p>
<ul><li>The default R optimiser when (strict) monotonicity of the detection function is enforced has been improved. Monotonicity is enforced only when the detection function has adjustment terms but does not include covariates. The new optimiser is a Sequential Least Squares Programming (SLSQP) algorithm included in the ‘nloptr’-package. This optimiser uses analytical gradients rather than approximate gradients and is therefore more robust and has improved runtime. Users can still make ddf() use the previous default R optimiser by specifying mono.method = ‘solnp’ in the ‘control’ argument. The default for mono.method is ‘slsqp’. Because of this and other small improvements and bug fixes in the monotonic optimiser, results from ddf() might change even when using the old solnp optimiser. In most cases, however, we do not expect significant changes in the estimates.</li>
</ul><p>Bug Fixes</p>
<ul><li>The summary of the fitting object now correctly prints the optimiser used when monotonicity is enforced (‘slsqp’ or ‘solnp’).</li>
<li>check.mono() now uses the same point locations as the optimiser. It also uses the same tolerance as the optimiser (1e-8) and applies this tolerance when checking (strict) monotonicity, and when checking 0 &lt;= g(x) &lt;= 1.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.3.0" id="mrds-230">mrds 2.3.0<a class="anchor" aria-label="anchor" href="#mrds-230"></a></h2><p class="text-muted">CRAN release: 2023-12-18</p>
<p>New Features</p>
<ul><li>The ‘P2’ estimator is now the default for estimating the encounter rate variance for point transect surveys. (Issue <a href="https://github.com/DistanceDevelopment/mrds/issues/65" class="external-link">#65</a>)</li>
</ul><p>Bug Fixes</p>
<ul><li>Re-formatted the format section of the documentation for the book.tee.data (Issue <a href="https://github.com/DistanceDevelopment/mrds/issues/91" class="external-link">#91</a>)</li>
<li>Ensure that the MCDS optimizer is not used for double observer models as this was generating errors. (Issue <a href="https://github.com/DistanceDevelopment/mrds/issues/89" class="external-link">#89</a>)</li>
<li>Improved the documentation on initial values, lower and upper bounds in both the ddf and mrds_opt documentation (mrds_opt was renamed from mrds-opt which was not accessible via ?mrds-opt). (Issue <a href="https://github.com/DistanceDevelopment/mrds/issues/90" class="external-link">#90</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.9" id="mrds-229">mrds 2.2.9<a class="anchor" aria-label="anchor" href="#mrds-229"></a></h2><p class="text-muted">CRAN release: 2023-07-06</p>
<p>New Features</p>
<ul><li>Users can now download the fortran MCDS.exe optimiser used in Distance for Windows and fit single observer models with both the optimisers in R via # mrds and also MCDS.exe. For some datasets the optimisation with MCDS.exe is superior (giving a better likelihood) than the optimiser in R used with mrds. See ?MCDS for more details.</li>
</ul><p>Bug Fixes</p>
<ul><li>fix bug where the (true, 2nd derivative) hessian was not calculated during optimisation. This then lead to weird errors later (summary doesn’t work etc). Hessians are now calculated in this case. Thanks to Anne Provencher St-Pierre for reporting the issue</li>
<li>Fix prediction bug (Issue <a href="https://github.com/DistanceDevelopment/mrds/issues/84" class="external-link">#84</a>) where predicting for hazard rate model with covariates and se.fit= TRUE. Note there may be issues when predicting in this instance for binned data - check results are as expected.</li>
<li>Fix bug when a uniform model was fitted with no adjustments. This caused an error when looking for the hessian. It also required that the covariance set to 0 when estimating the cluster size standard errors (Issue <a href="https://github.com/DistanceDevelopment/mrds/issues/79" class="external-link">#79</a>).</li>
<li>fix bug with using binned data via cutpoints for prediction (<a href="https://github.com/DistanceDevelopment/mrds/issues/73" class="external-link">#73</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.8" id="mrds-228">mrds 2.2.8<a class="anchor" aria-label="anchor" href="#mrds-228"></a></h2><p class="text-muted">CRAN release: 2022-11-16</p>
<ul><li>Fix bug where plotting rem.fi models when truncation was used would lead to an error being thrown. (<a href="https://github.com/DistanceDevelopment/mrds/issues/58" class="external-link">#58</a>)</li>
<li>Fix bugs when a uniform is fitted with no adjustments (<a href="https://github.com/DistanceDevelopment/mrds/issues/59" class="external-link">#59</a>)</li>
<li>Fix bug in plotting when left truncation was used and points didn’t match detection function line (Distance <a href="https://github.com/DistanceDevelopment/mrds/issues/134" class="external-link">#134</a>)</li>
<li>Fix bug in debug reporting when uniform only models are used (Distance <a href="https://github.com/DistanceDevelopment/mrds/issues/136" class="external-link">#136</a>)</li>
<li>Fix bug in adjustment term fitting where width scaling was defined as right minus left truncation, rather than just the right truncation value (Distance <a href="https://github.com/DistanceDevelopment/mrds/issues/133" class="external-link">#133</a>)</li>
<li>Use (0,width) as the interval for monotonicity checks, rather than (left, width) as this was causing issues and is not consistent with Distance for Windows (Distance <a href="https://github.com/DistanceDevelopment/mrds/issues/135" class="external-link">#135</a>)</li>
<li>Expose mono.outer.iter option to control number of outer iterations used to fit a monotonic model. Default 200.</li>
<li>Make dht output tables consistent. Now always refers to Region in the display (rather than Region in summary and Label in N/D tables). Note this is only a display change so won’t break code which looks to extract these values based on column names from the dht object which is unchanged.</li>
<li>Fixed bug leading to erroneous zero totals in individuals N/D tables when there were no sightings in one or more strata. Bug was apparent when the data were sightings of clusters and the varflag 1 option (er_method = 1 in Distance ds function) was selected in the dht function.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.7" id="mrds-227">mrds 2.2.7<a class="anchor" aria-label="anchor" href="#mrds-227"></a></h2><p class="text-muted">CRAN release: 2022-08-20</p>
<ul><li>Fix bug in check for # parameters &lt; # data. Thanks to Anne Provencher St-Pierre.</li>
<li>No longer display errors caused by solnp/gosolnp when doing constrained optimisation, these can be seen when showit&gt;0 if necessary.</li>
<li>EXPERIMENTAL change to use fixed grid starting values when using monotonicity constraints, set control$mono.random.start=TRUE to get old behaviour</li>
<li>Scale covariates absolutely rather than relatively during optimisation.</li>
<li>Expected.S element of dht return now a data.frame not a list</li>
<li>Fix total encounter rate and its variance in stratified analysis</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.6" id="mrds-226">mrds 2.2.6<a class="anchor" aria-label="anchor" href="#mrds-226"></a></h2><p class="text-muted">CRAN release: 2022-03-17</p>
<ul><li>Individuals summary table for dht now includes k (number of transects)</li>
<li>Add effective detection radius (EDR) and its uncertainty to summary output</li>
<li>Change default rounding of chi-squared test tables. This can be customized using print(ddf.gof(…), digits=?) for e.g., printing with knitr::kable</li>
<li>New detection function: two-part normal (“tpn”), useful for aerial surveys in mountainous terrain, see Becker EF, Christ AM (2015) A Unimodal Model for Double Observer Distance Sampling Surveys. PLOS ONE 10(8): e0136403. <a href="https://doi.org/10.1371/journal.pone.0136403" class="external-link uri">https://doi.org/10.1371/journal.pone.0136403</a> and ?“two-part-normal”.</li>
<li>To improve consistency in functions and arguments in the package, some functions will change from . separation to _. For now both versions exist but will be removed in # mrds 2.2.7.
<ul><li>add_df_covar_line -&gt; add.df.covar.line</li>
<li>p_dist_table -&gt; p.dist.table</li>
</ul></li>
<li>Variable strip widths are now supported in dht. Users should supply an additional column to the sample data.frame (“CoveredArea”) giving the total area covered in the given transect and set options=list(areas.supplied=TRUE). Thanks to Megan Ferguson for providing an example, code and feedback.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.5" id="mrds-225">mrds 2.2.5<a class="anchor" aria-label="anchor" href="#mrds-225"></a></h2><p class="text-muted">CRAN release: 2021-07-01</p>
<ul><li>use “probabalists” definition of Hermite polynomials, as from Distance. More numerically stable</li>
<li>remove setting of Hermite parameter to 1 (unclear why this was the case!)</li>
<li>refinement of adjustment-key-all outer optimisation, optimization is now only over the subset of parameters, rather than holding one parameter constant</li>
<li>refine outer optimization, using best previous values (by likelihood) rather than last values. Use optimizer’s convergence diagnostic to assess outer convergence.</li>
<li>Refinement of “inner” optimization (detfct.fit.opt): (1) simplification of stopping rules (one while() loop rather than two), (2) parameters are nudged only when bounds have not been hit, if bounds have been hit then they are expanded</li>
<li>Rescaling of covariate models’ parameters (when scaling difference was large) was inverted, causing all kinds of issues.</li>
<li>Made the scaling kick-in at smaller scales.</li>
<li>Removed inner (detfct.fit.opt) while() loop dependence on bounded status, since that didn’t seem to make sense</li>
<li>Stop “correcting” infinite/NaN integrals to small numbers as this was misleading the optimizer to think these were “good” values</li>
<li>Refine constrained optimisation to use actual starting values once, then use random start points and compare the two.</li>
<li>handle the case where a model failed in AIC adjustment term selection, montonicity check would throw an error</li>
<li>assign g(x)=0 for g(x)&lt;0 when integrating the detection function (but check post-optimisation that this is not a problem!)</li>
<li>fix bug in predict.ds when uniform key was used with binned data (Thanks to Noémie Cappelle for reporting this issue!)</li>
<li>dht now prints additional information about the variance estimators used</li>
<li>errors now thrown when more parameters than data (either unique distance values or bins)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.4" id="mrds-224">mrds 2.2.4<a class="anchor" aria-label="anchor" href="#mrds-224"></a></h2><p class="text-muted">CRAN release: 2020-12-01</p>
<ul><li>add_df_covar_line now plots probability density functions for the point transect case</li>
<li>warning is no longer raised when truncation is not set but bins are specified for binned data (it’s assumed that the furthest cutpoint is the truncation)</li>
<li>AIC/logLik functions now work for all methods</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.3" id="mrds-223">mrds 2.2.3<a class="anchor" aria-label="anchor" href="#mrds-223"></a></h2><p class="text-muted">CRAN release: 2020-07-31</p>
<ul><li>fix bug where region areas were not duplicated properly when density was estimated (using Area=0 in data)</li>
<li>fix a bug in getting starting values for hazard-rate detection functions when point transect data is used</li>
<li>fix issue with left truncation when estimating abundance/density in dht</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.2" id="mrds-222">mrds 2.2.2<a class="anchor" aria-label="anchor" href="#mrds-222"></a></h2><p class="text-muted">CRAN release: 2020-05-12</p>
<ul><li>fix issue in predict() when uniform key functions are used with new data.</li>
<li>new function p_dist_table() to show the distribution of estimated probabilities of detection. Useful for covariate models to determine issues with very small ps.</li>
<li>new function add_df_covar_line(), which can be used to add lines plots showing the detection function for a given covariate combination. Thanks to various members of the distance sampling mailing list for this suggestion.</li>
<li>plots produced by plot.ds/plot.rem/plot.rem.fi/plot.trial/plot.trial.fi/plot.io/plot.io.fi/plot.det.tables now use same defaults as R 4.0.0 (“lightgrey” bars for histograms). Some deprecated arguments to plot.ds were removed.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.1" id="mrds-221">mrds 2.2.1<a class="anchor" aria-label="anchor" href="#mrds-221"></a></h2><p class="text-muted">CRAN release: 2020-01-22</p>
<ul><li>hessian now returned when solnp (constrained optimisation) is used to fit the detection function</li>
<li>Check for NA covariate values, thanks to Ana Cañadas for highlighting this issue.</li>
<li>enable P2 variance estimator for points</li>
<li>Corrected handling of NA covariates</li>
<li>new option se.fit for predict.ds to obtain standard errors for the probability of detection or ESW</li>
<li>Fixed a bug in dht when left truncation is used. Previously left truncation was ignored. See <a href="https://github.com/DistanceDevelopment/mrds/issues/22" class="external-link uri">https://github.com/DistanceDevelopment/mrds/issues/22</a> thanks to Carl Schwarz for finding this bug.</li>
<li>Fix bug where two objects could have a missing observer and no error was thrown. Thanks to Ainars Aunins for reporting this bug and Eric Rexstad for diagnosing.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.2.0" id="mrds-220">mrds 2.2.0<a class="anchor" aria-label="anchor" href="#mrds-220"></a></h2><p class="text-muted">CRAN release: 2018-06-27</p>
<ul><li>fixed bug in calculation of Kolmogorov-Smirnov p-values. Previous methods did not take into account that parameters of the detection function were estimated, so a new bootstrap-based approach has been implemented. As this is time-consuming, the Kolmogorov-Smirnov test is no longer performed by default (use ks=TRUE to get the test).</li>
<li>Encounter rate variance for point transects when points were not all sampled an equal number of times was incorrect. # mrds now uses the P3 estimator from Fewster et al (2009) for point transect encounter rate variance.</li>
<li>Bug in predicting when left truncation is used. Previously if the distance column in the new data was set to zero and left truncation was &gt; 0 predictions were discarded, this was particularly problematic for io, etc # mrds models. Thanks to Natalie Kelly for spotting this and suggesting a fix.</li>
<li>Add errors when “P3” is used as an encounter rate variance estimator with non-point transect data, throws a warning and switches to P3 for points when it’s not specified.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.18" id="mrds-2118">mrds 2.1.18<a class="anchor" aria-label="anchor" href="#mrds-2118"></a></h2><p class="text-muted">CRAN release: 2017-07-04</p>
<ul><li>fixed bug in parameter rescaling where scales were incorrectly entered as 1 due to an indexing bug</li>
<li>Quantile-quantile plots now use an aspect ratio of 1</li>
<li>Bug in half-normal integration code when no adjustments are used lead to likelohood being evaluated incorrectly for models with binned (grouped) distances. This only effected AIC comparisons between models and parameter estimates should have been the same. Thanks to Olivier Devineau for spotting this!</li>
<li>Fix bug where predict.ds() didn’t work with uniform keys. Thanks to Jason Roberts for reporting this bug.</li>
<li>Correctly specify distbegin/distend for predictions with binned data, thanks to Jason Roberts for spotting this bug.</li>
<li>Let the user know that int.range was set in summary() results</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.17" id="mrds-2117">mrds 2.1.17<a class="anchor" aria-label="anchor" href="#mrds-2117"></a></h2><p class="text-muted">CRAN release: 2016-10-03</p>
<ul><li>fixed starting value bug for hazard-rate models when distances are binned. Thanks to Natalia Schroeder and Eric Rexstad for discovering this.</li>
<li>predict.ds now uses numerical integration to calculate integrals (rather than an approximation). Thanks to Eric Rexstad for spotting an issue with goodness of fit testing that highlighted this.</li>
<li>plot.ds() now accepts an xlab=“” argument to change the x axis label. Thanks to Steve Ahlswede for suggesting this.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.16" id="mrds-2116">mrds 2.1.16<a class="anchor" aria-label="anchor" href="#mrds-2116"></a></h2><p class="text-muted">CRAN release: 2016-08-10</p>
<ul><li>improved predict() method now does the Right Thing with factors</li>
<li>Fixed bug in scaling of histograms for point transect pdf plots and points on those plots. Thanks to Erics Howe and Rexstad for reporting these issues.</li>
<li>You can now set y axis limits when using plot.ds, defaults should be more sensible for pt+point models. Thanks to Eric Howe for the suggestion.</li>
<li>Fixed bug when setting initial values that threw many errors. Thanks to Laura Marshall for spotting this.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.15" id="mrds-2115">mrds 2.1.15<a class="anchor" aria-label="anchor" href="#mrds-2115"></a></h2>
<ul><li>rescaling parameters were not correct, now fixed. Thanks to Laura Marshall for spotting this.</li>
<li>coefficients are called coefficients (not a mixture of coefficients and parameters) in summary() results</li>
<li>speed-up in io.fi models (thanks to Winston Chang’s profvis, showing many unecessary calls to model.matrix)</li>
<li>plot.ds now has a pdf= option to plot the probability density function (for point transect models only)</li>
<li>assign.par, create.ddfobj and detfct are now exported, so it can be used by dsm (though shouldn’t be used by anything else!)</li>
<li>fixed bug in left truncation where probability of detection was not calculated correctly. Thanks to Jason Roberts for pointing this out!</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.14" id="mrds-2114">mrds 2.1.14<a class="anchor" aria-label="anchor" href="#mrds-2114"></a></h2><p class="text-muted">CRAN release: 2015-07-29</p>
<ul><li>updated initialvalues calculation for hazard-rate – now uses Beavers &amp; Ramsay method to scale parameters for hazard-rate</li>
<li>automatic parameter rescaling for covariate models when covariates are poorly scaled. Now default for nlminb method</li>
<li>minor speed-up to logistic code when distance is a covariate</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.13" id="mrds-2113">mrds 2.1.13<a class="anchor" aria-label="anchor" href="#mrds-2113"></a></h2>
<ul><li>link to distance sampling Google Groups in help</li>
<li>duplicate non-convergence warning/error removed</li>
<li>warning of singular Hessian is now a warning()</li>
<li>re-wrote the debug output to be easier to read</li>
<li>dht now has an option (ci.width) to specify confidence interval width in output (thanks to David Pavlacky for the suggestion)</li>
<li>monotonicity now operates over left-&gt;right truncation for models that are left truncated and will fail with an error message if many integration intervals are used. Thanks to Tiago Marques for highlighting this issue.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.12" id="mrds-2112">mrds 2.1.12<a class="anchor" aria-label="anchor" href="#mrds-2112"></a></h2><p class="text-muted">CRAN release: 2015-02-05</p>
<ul><li> examples are now .</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.11" id="mrds-2111">mrds 2.1.11<a class="anchor" aria-label="anchor" href="#mrds-2111"></a></h2>
<ul><li>Bug in unif+cos(1) models when using monotonicity constraints and randomised starting points. Since the model only has 1 parameter, there is a bug in selecting columns in Rsolnp starting value code that makes the result be a vector, which then doesn’t work with an apply later. Workaround of not using randomised starting values in # mrds for that model. Thanks to Nathalie Cavada for finding this bug.</li>
<li>Fixed bug in pdot.dsr.integrate.logistic which was giving incorrect AIC values for FI models with binned data for points or lines.</li>
<li>Fixed issue where returned optimisation obejct got accessed without being checked to see if it’s result was an error, causing problems when encapsulating ddf in other functions.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.10" id="mrds-2110">mrds 2.1.10<a class="anchor" aria-label="anchor" href="#mrds-2110"></a></h2><p class="text-muted">CRAN release: 2014-09-27</p>
<ul><li>added testing directory to .Rbuildignore, tests are now not included in built packages and are not run on CRAN. For tests use the source packages on github.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.9" id="mrds-219">mrds 2.1.9<a class="anchor" aria-label="anchor" href="#mrds-219"></a></h2>
<p>BUG FIXES</p>
<ul><li>removed test that failed on CRAN’s testing</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.8" id="mrds-218">mrds 2.1.8<a class="anchor" aria-label="anchor" href="#mrds-218"></a></h2><p class="text-muted">CRAN release: 2014-09-16</p>
<p>CHANGES * removed doeachint/cgftab code, which used a spline approximation to the effective strip width/effective area when a half-normal detection function was used. This has been replaced with exact calculation via the error function (erf). * tests updated accordingly * monotonically constrained models now use a bunch of random start points – uses gosolnp() from Rsolnp * re-fitting by jiggling parameters refined to multiply by a uniform variable with limits set as the upper and lower bounds (+/-1) so jiggling can go either way, on approximately the same scale as the parameters * corrected documentation for predict methods, which incorrectly stated what is returned for point transect models. Thanks to Thibault Dieuleveut for spotting this.</p>
<p>BUG FIXES</p>
<ul><li>fixed 2 bugs in create.varstructure; the first was for removal method which was being treated as a trial method. The second was when obs.table was not specified (Region and sample labels in dataframe for each obs) and there was dual observers. In that case it was doubling the number of observations.</li>
<li>fixed a bug in dht.deriv which had not been setup for removal; thanks to John Boulanger for noticing and reporting both of these bugs</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.7" id="mrds-217">mrds 2.1.7<a class="anchor" aria-label="anchor" href="#mrds-217"></a></h2>
<p>BUG FIXES</p>
<ul><li>Standardisation was being applied to detection functions (such that g(0)=1) when there were no adjustments (which is uneccesary) but also caused issues when using gamma detection functions as this should be calculated at g(apex) instead. Standardisation code has been removed for when there are no adjustments and the correct scaling used for the gamma when there are. Thanks to Thomas Doniol-Valcroze for alerting us to this bug.</li>
<li>Partial name-matching in dht was fixed. Produced warning but not error.</li>
</ul><p>NEW FEATURES</p>
<ul><li>Tests for gamma detection functions</li>
<li>Observations are automatically ordered by object and observer fields (if included) in ddf as expected by double observer analysis. A erroneous error message can be created if they are not ordered correctly or worse. Thanks to Ainars Aunins for bringing this to our attention.</li>
<li>Added function create_document() which will run a shiny application interface to # mrds and will create a knitr document from a template. The template currently is only for a single observer analysis and is behind on all of the features for the app which is fairly complete.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.6" id="mrds-216">mrds 2.1.6<a class="anchor" aria-label="anchor" href="#mrds-216"></a></h2><p class="text-muted">CRAN release: 2014-06-11</p>
<p>BUG FIXES</p>
<ul><li>some key+adjustment models failed to converge due to bugs in the optimisation code (mainly unif+cosine models)</li>
</ul><p>NEW FEATURES</p>
<ul><li>optimisation tips help page at ?“mrds-opt”</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.5" id="mrds-215">mrds 2.1.5<a class="anchor" aria-label="anchor" href="#mrds-215"></a></h2><p class="text-muted">CRAN release: 2014-04-22</p>
<p>CHANGES * models with both adjustment terms and covariates are now allowed * mono.check function checks that a detection function is monotonic over its range (at the observed covariate combinations if covariates are included)</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.4-5" id="mrds-214-5">mrds 2.1.4-5<a class="anchor" aria-label="anchor" href="#mrds-214-5"></a></h2>
<p>CHANGES</p>
<ul><li>new <code>testthat</code> changes test locations etc, this has been sorted out.</li>
<li>which= argument in plot.* now sorts the which first, so plots will always be in order</li>
<li>plot.ds is now more friendly to par() users, thanks to Jason Roberts for the pointer</li>
</ul><p>BUG FIXES</p>
<ul><li>uniform+cosine detection functions were ignored when using monotonicity constraints, now they can be used together</li>
<li>mono.strict=TRUE didn’t automatically turn on mono=TRUE, extra logic to correct this</li>
<li>montonicity constraints did not use standardised (g(x)/g(0) detection functions, so if g(x)&gt;1 monotonicity constraints were voilated. Now standardised detection functions are used. Thanks to Len Thomas for noticing this bug.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.4-3" id="mrds-214-3">mrds 2.1.4-3<a class="anchor" aria-label="anchor" href="#mrds-214-3"></a></h2>
<p>BUG FIX</p>
<ul><li>predict.io.fi did not work for new data (thanks to Len Thomas and Phil Hammond for pointing this out)</li>
</ul><p>CHANGES</p>
<ul><li>general documentation updates</li>
<li>simplication and re-structuring of internals</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.4-3" id="mrds-214-3-1">mrds 2.1.4-3<a class="anchor" aria-label="anchor" href="#mrds-214-3-1"></a></h2>
<p>CHANGES</p>
<ul><li>internal re-structuring of summary methods</li>
<li>more tests</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.4-2" id="mrds-214-2">mrds 2.1.4-2<a class="anchor" aria-label="anchor" href="#mrds-214-2"></a></h2>
<p>CHANGES</p>
<ul><li>plot.ds now has a new argument, if TRUE (default) it will create a new window for each plot.</li>
<li>general janitorial work inside plotting methods, removing and simplifying old code; (hopefully) no new features.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.4-1" id="mrds-214-1">mrds 2.1.4-1<a class="anchor" aria-label="anchor" href="#mrds-214-1"></a></h2>
<p>CHANGES</p>
<ul><li>Warning now issued when truncation is set to the largest distance by default.</li>
<li>updated dht documentation</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.4" id="mrds-214">mrds 2.1.4<a class="anchor" aria-label="anchor" href="#mrds-214"></a></h2><p class="text-muted">CRAN release: 2013-09-23</p>
<p>CHANGES</p>
<ul><li>modified det.tables and plot.det.tables so it does not create and plot some tables depending on observer configuration (io,trial,removal).</li>
<li>to plot functions (other than plot.ds) added argument subtitle=TRUE (default). It can be either TRUE, FALSE. If TRUE it shows sub-titles for plot type. If FALSE, no subtitles are shown. With this argument it is possible to get subtitles without main title.</li>
<li>set iterlimit=1 in call to rem.glm from ddf.rem.fi to prevent convergence issues in getting starting values.</li>
<li>created average.line.cond and it is now used in place of calcp.# mrds which was computing average line for conditional detection function by weighting values by estimated population proportions for each covariate value. It is now weighted by sample proportions (mean value).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.3-1" id="mrds-213-1">mrds 2.1.3-1<a class="anchor" aria-label="anchor" href="#mrds-213-1"></a></h2>
<p>BUG FIXES</p>
<ul><li>patched dht.se so if vc1=NA it will not fail</li>
<li>patched plot.ds to only issue dev.new when not using another graphics device so it plays nice with Distance.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.3" id="mrds-213">mrds 2.1.3<a class="anchor" aria-label="anchor" href="#mrds-213"></a></h2><p class="text-muted">CRAN release: 2013-08-13</p>
<p>BUG FIXES</p>
<ul><li>patched bug in dht which was returning incorrect values in bysample for sample.area and Dhat.</li>
<li>patched code in dht.se so it would skip over variance component for p when key=unif and p=1.</li>
</ul><p>CHANGES</p>
<ul><li>modified code in detfct.fit.opt and io and rem functions to adapt to changes in optimx</li>
<li>removed old depends statements to optimx and Rsolnp; uses import</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.2" id="mrds-212">mrds 2.1.2<a class="anchor" aria-label="anchor" href="#mrds-212"></a></h2><p class="text-muted">CRAN release: 2013-06-26</p>
<p>BUG FIXES</p>
<ul><li>fixed usage and example lines that were too long</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.1" id="mrds-211">mrds 2.1.1<a class="anchor" aria-label="anchor" href="#mrds-211"></a></h2>
<p>BUG FIXES</p>
<ul><li>for full independence methods, the calculation for the distance sampling component was for unbinned data only. Code has been added to compute this component correctly for binned data. This required changes to each of the ddf.x.fi routines and for the logistic integration routines.</li>
</ul><p>CHANGES</p>
<ul><li>Modified flpt.lnl code to set integrals to 1E-25 if &lt;=0</li>
<li>In integrate.pdf a vector argument for the integration range is converted to matrix if of length 2.</li>
<li>ddf.gof will now use breaks set for binned data unless others are specified.</li>
</ul><p>NEW FEATURES</p>
<ul><li>Added threshold detection functions (“th1” and “th2”) which required some minor changes in other functions for summary/print.</li>
<li>Added xlab and ylab arguments to plot functions to over-ride default labels</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.1.0" id="mrds-210">mrds 2.1.0<a class="anchor" aria-label="anchor" href="#mrds-210"></a></h2><p class="text-muted">CRAN release: 2012-12-11</p>
<p>CHANGES</p>
<ul><li>Modified DESCRIPTION so only R 2.15 or greater is allowed. Needed for optimHess jll(12/10/2012)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.9" id="mrds-209">mrds 2.0.9<a class="anchor" aria-label="anchor" href="#mrds-209"></a></h2><p class="text-muted">CRAN release: 2012-12-04</p>
<p>NEW FEATURES</p>
<ul><li>New option plot=TRUE/FALSE in qqplot.ddf(), for when you only want the K-S and CvM test statistics, not plotting. dlm(11/13/2012)</li>
</ul><p>BUG FIXES</p>
<ul><li>Fixed problem when obs dataframe in call to dht (which links observations to samples and regions) contained fields also in observation dataframe. Now only fields needed from obs are selected before merge. dlm(11/13/2012)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.8" id="mrds-208">mrds 2.0.8<a class="anchor" aria-label="anchor" href="#mrds-208"></a></h2>
<ul><li>Unchanged version sent out with Distance in summer 2012</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.7" id="mrds-207">mrds 2.0.7<a class="anchor" aria-label="anchor" href="#mrds-207"></a></h2>
<p>NEW FEATURES</p>
<ul><li>Restructured likelihood/integration code for fitting ds models</li>
<li>Adjustment functions will now work with binned data. Code was added to assure that fields distbegin and distend are available if binned=TRUE and breaks are set as well.</li>
<li>Added argument adj.exp which if set to TRUE will use key<em>exp(adj) rather than key</em>adj to keep f(x)&gt;0</li>
<li>Added following restrictions for adjustments: if uniform key, adj.scale must be “width”; if non-uniform key and adj.scale=“width”, doeachint set to TRUE because scale integration will not work.</li>
<li>Changed code in several functions so a uniform key with no adjustment functions could be used.</li>
<li>New option plot=TRUE/FALSE in qqplot.ddf(), for when you only want the K-S and CvM test statistics, not plotting.</li>
</ul><p>BUG FIXES</p>
<ul><li>Fixed inconsistencies in use and documentation of showit argument</li>
<li>Fixed a bug where groups were not recognised in dht() when the size column occurred in both model data and observation table. (Thanks to Darren Kidney for spotting this.)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.6" id="mrds-206">mrds 2.0.6<a class="anchor" aria-label="anchor" href="#mrds-206"></a></h2>
<p>NEW FEATURES</p>
<ul><li>Example code for binned point count data added to help for ddf</li>
<li>Modified ddf.rem.fi and ddf.io.fi to use starting values from iterative offset glm to make optimization more robust</li>
<li>Added a restriction so no one attempts fitting adjustment functions with covariates.</li>
<li>Added some code to assure all of the necessary fields are available for binned data (binned=TRUE).</li>
</ul><p>BUG FIXES</p>
<ul><li>Patched create.ddfobj so that point counts with binned data would work properly</li>
<li>Patched ddf.ds such that stored data in object$data has detected=1</li>
<li>Patched ddf.io.fi to throw an error when optimx() does not converge</li>
<li>Patched ddf.io.fi and ddf.rem.fi so inclusion of factor(observer) will work in formula</li>
<li>Patched dht, dht.se and covered.region.dht so it would handle 0 observations</li>
<li>Suppress package messages from optimx</li>
<li>Patched fpt.lnl, flt.lnl, print.ddf, model.description, summary.ds, print.summary.ds and coef.io, coef.trial, coef.rem, plot.io, plot.trial, and plot.rem to handle uniform key function.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.5" id="mrds-205">mrds 2.0.5<a class="anchor" aria-label="anchor" href="#mrds-205"></a></h2><p class="text-muted">CRAN release: 2012-03-27</p>
<p>NEW FEATURES</p>
<ul><li>First version submitted to CRAN</li>
</ul><p>BUG FIXES</p>
<ul><li>Fixed code in dht.se such that it uses sample size from detection model in Satterthwaite approximation rather than size of selected subset of observations.</li>
<li>Fixed coef functions so they would return parameter estimates for adjustment functions if any.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.4" id="mrds-204">mrds 2.0.4<a class="anchor" aria-label="anchor" href="#mrds-204"></a></h2>
<p>BUG FIXES</p>
<ul><li>Changed flt.var to compute variance of average p correctly for point transects.</li>
<li>Numerous changes by dlm to optimization code</li>
<li>Changes to documentation to remove non-ASCII characters</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.3" id="mrds-203">mrds 2.0.3<a class="anchor" aria-label="anchor" href="#mrds-203"></a></h2>
<p>NEW FEATURES</p>
<ul><li>Major rewrite to ddf and summary functions to handle adjustment functions</li>
</ul><p>BUG FIXES</p>
<ul><li>Changes to det.tables and gof functions to use include.lowest=TRUE in calls to cut function</li>
<li>Changed all usage of T and F to TRUE and FALSE</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.2" id="mrds-202">mrds 2.0.2<a class="anchor" aria-label="anchor" href="#mrds-202"></a></h2>
<ul><li>For changes in 2.0.2 and earlier see ONEWS</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>We improve our site and software support by using Microsoft Clarity to see <br> how you use our website. By using our site, you agree that we and Microsoft <br> can collect and use this data. Clarity is GDPR compliant.</p>
</div>

<div class="pkgdown-footer-right">
  <p>If you wish to donate to development and maintenance, please <a href="mailto:distance@st-andrews.ac.uk">email us</a>.</p>
</div>

    </footer></div>





  </body></html>


<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Occasionally when fitting an `mrds` model one can run into optimisation
issues. In general such problems can be quite complex so these "quick fixes"
may not work. If you come up against problems that are not fixed by these
tips, or you feel the results are dubious please go ahead and contact the
package authors.'><title>Tips on optimisation issues in mrds models — mrds_opt • mrds</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tips on optimisation issues in mrds models — mrds_opt"><meta property="og:description" content='Occasionally when fitting an `mrds` model one can run into optimisation
issues. In general such problems can be quite complex so these "quick fixes"
may not work. If you come up against problems that are not fixed by these
tips, or you feel the results are dubious please go ahead and contact the
package authors.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mrds</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Function reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/mrds-golftees.html">Point and full independence</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/distancesamp" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/DistanceDevelopment/mrds/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Tips on optimisation issues in <code>mrds</code> models</h1>
      <small class="dont-index">Source: <a href="https://github.com/DistanceDevelopment/mrds/blob/HEAD/R/mrds-package.R" class="external-link"><code>R/mrds-package.R</code></a></small>
      <div class="d-none name"><code>mrds_opt.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Occasionally when fitting an `mrds` model one can run into optimisation
issues. In general such problems can be quite complex so these "quick fixes"
may not work. If you come up against problems that are not fixed by these
tips, or you feel the results are dubious please go ahead and contact the
package authors.</p>
    </div>


    <div class="section level2">
    <h2 id="debug-mode">Debug mode<a class="anchor" aria-label="anchor" href="#debug-mode"></a></h2>
    

<p>One can obtain debug output at each stage of the optimisation using the
<code>showit</code> option. This is set via <code>control</code>, so adding
<code>control=list(showit=3)</code> gives the highest level of debug output
(setting <code>showit</code> to 1 or 2 gives less output).</p>
    </div>
    <div class="section level2">
    <h2 id="re-scaling-covariates">Re-scaling covariates<a class="anchor" aria-label="anchor" href="#re-scaling-covariates"></a></h2>
    

<p>Sometimes convergence issues in covariate (MCDS) models are caused by values
of the covariate being very large, so a rescaling of that covariate is then
necessary. Simply scaling by the standard deviation of the covariate can
help (e.g. <code>dat$size.scaled &lt;- dat$scale/sd(dat$scale)</code> for a covariate
<code>size</code>, then including <code>size.scaled</code> in the model instead of
<code>size</code>).</p>
<p>It is important to note that one needs to use the original covariate (size)
when computing Horvitz-Thompson estimates of population size if the group
size is used in that estimate. i.e. use the unscaled size in the numerator
of the H-T estimator.</p>
    </div>
    <div class="section level2">
    <h2 id="factor-levels">Factor levels<a class="anchor" aria-label="anchor" href="#factor-levels"></a></h2>
    

<p>By default R will set the base factor level to be the label which comes
first alphabetically. Sometimes this can be an issue when that factor level
corresponds to a subset of the data with very few observations. This can
lead to very large uncertainty estimates (CVs) for model parameters. One way
around this is to use <code><a href="https://rdrr.io/r/stats/relevel.html" class="external-link">relevel</a></code> to set the base level to a level
with more observations.</p>
    </div>
    <div class="section level2">
    <h2 id="initial-values">Initial values<a class="anchor" aria-label="anchor" href="#initial-values"></a></h2>
    

<p>Initial (or starting) values for the dsmodel can be set via the <code>initial</code> 
element of the <code>control</code> list. <code>initial</code> is a list itself with 
elements <code>scale</code>, <code>shape</code> and <code>adjustment</code>, corresponding to 
the associated parameters. If a model has covariates then the <code>scale</code> or
<code>shape</code> elements will be vectors with parameter initial values in the
same order as they are specific in the model formula (using <code>showit</code> is
a good check they are in the correct order). Adjustment starting values are
in order of the order of that term (cosine order 2 is before cosine order 3
terms).</p>
<p>One way of obtaining starting values is to fit a simpler model first (say
with fewer covariates or adjustments) and then use the starting values from
this simpler model for the corresponding parameters.</p>
<p>Another alternative to obtain starting values is to fit the model (or some
submodel) using Distance for Windows. Note that Distance reports the scale
parameter (or intercept in a covariate model) on the exponential scale, so
one must <code>log</code> this before supplying it to <code>ddf</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="bounds">Bounds<a class="anchor" aria-label="anchor" href="#bounds"></a></h2>
    

<p>One can change the upper and lower bounds for the dsmodel parameters. These 
specify the largest and smallest values individual parameters can be. By 
placing these constraints on the parameters, it is possible to "temper" the
optimisation problem, making fitting possible.</p>
<p>Again, one uses the <code>control</code> list, the elements <code>upperbounds</code> and
<code>lowerbounds</code>. In this case, each of <code>upperbounds</code> and
<code>lowerbounds</code> are vectors, which one can think of as each of the
vectors <code>shape</code>, <code>scale</code> and <code>adjustment</code> from the "Initial
values" section above, concatenated in that order. If one does not occur
(e.g. no shape parameter) then it is simple omitted from the vector.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>David L. Miller &lt;dave@ninepointeightone.net&gt;</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>We improve our site and software support by using Microsoft Clarity to see <br> how you use our website. By using our site, you agree that we and Microsoft <br> can collect and use this data. Clarity is GDPR compliant.</p>
</div>

<div class="pkgdown-footer-right">
  <p>If you wish to donate to development and maintenance</p>
</div>

    </footer></div>

  

  

  </body></html>

